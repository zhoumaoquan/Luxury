(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Profile/order/orderList"],{4427:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={uTabs:function(){return n.e("uview-ui/components/u-tabs/u-tabs").then(n.bind(null,"1bc8"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"300f"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"c5a8"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"6b2a"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"5322"))},uTopTips:function(){return n.e("uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,"cf5c"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.number=""})},r=[]},"4d3b":function(t,e,n){"use strict";var i=n("87fa"),o=n.n(i);o.a},"87fa":function(t,e,n){},9600:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a")),o=n("af94");function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return l(t)||c(t)||a(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e,n,i,o,r,s){try{var u=t[r](s),a=u.value}catch(c){return void n(c)}u.done?e(a):Promise.resolve(a).then(i,o)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function s(t){f(r,i,o,s,u,"next",t)}function u(t){f(r,i,o,s,u,"throw",t)}s(void 0)}))}}var p=function(){n.e("component/ListItem/orderList").then(function(){return resolve(n("b5a2"))}.bind(null,n)).catch(n.oe)},m={components:{OrderList:p},data:function(){return{list:[],params:{page:1,limit:10,state:0,m_id:""},current:0,triggered:!1,isShow:!1,mgtop:0,orderList:[],status:"loadmore",loadText:{loadmore:"用力往下拉(点击)",loading:"正在加载，请休息下...",nomore:"我也是有底线的~"},flag:!0,type:"",currentId:"",number:"",state:""}},onLoad:function(e){t.showLoading({title:"加载中..."}),this.type=e.type,this.params.m_id=e.m_id,1==e.type?t.setNavigationBarTitle({title:"寄卖订单"}):t.setNavigationBarTitle({title:"回收订单"})},onShow:function(){this._getOrderNav()},methods:{_getOrderNav:function(){var e=this;return h(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.orderNav)(e.type);case 3:r=n.sent,e.list=r,1==e.type?e._getSellOrderList():e._getReceiveOrderList(),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),t.showToast({title:n.t0,icon:"none",success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1e3)}});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},_getSellOrderList:function(e){var n=this;(0,o.sellOrderList)(this.params).then((function(i){n.orderList=i,t.hideLoading(),e&&setTimeout((function(){n.triggered=!1,n._freshing=!1}),1e3)})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_getReceiveOrderList:function(e){var n=this;(0,o.receiveOrderList)(this.params).then((function(i){n.orderList=i,t.hideLoading(),e&&setTimeout((function(){n.triggered=!1,n._freshing=!1}),1e3)})).catch((function(e){t.showToast({title:e,icon:"none"})}))},tabsChange:function(e){t.showLoading({title:"Loading..."}),this.params.state=this.list[e].state,this.current=e,this.flag=!0,this.params.page=1,1==this.type?this._getSellOrderList():this._getReceiveOrderList()},onPulling:function(){this.triggered=!0},onRefresh:function(){this._freshing||(this._freshing=!0,1==this.type?this._getSellOrderList(!0):this._getReceiveOrderList(!0))},pullloading:function(){this.flag&&(this.status="loading",this.params.page+=1,1==this.type?this._loadingSell():this._loadingReceive())},_loadingSell:function(){var e=this;(0,o.sellOrderList)(this.params).then((function(t){if(0===t.length||""===t)return e.flag=!1,e.params.page-=1,void(e.status="nomore");e.orderList=[].concat(s(e.orderList),s(t)),e.status="loadmore"})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_loadingReceive:function(){var e=this;(0,o.receiveOrderList)(this.params).then((function(t){if(0===t.length||""===t)return e.flag=!1,e.params.page-=1,void(e.status="nomore");e.orderList=[].concat(s(e.orderList),s(t)),e.status="loadmore"})).catch((function(e){t.showToast({title:e,icon:"none"})}))},onRestore:function(){this.triggered="restore",this.topTips()},topTips:function(){this.$refs.uTips.show({title:"订单列表已刷新",type:"success"})},inputfocus:function(){this.mgtop=350},inputblur:function(){this.mgtop=0},loadClick:function(){this.pullloading()},orderModify:function(e){var n=this,i=e.type-1;t.showModal({title:"提示",content:"您确定需要修改该订单邮寄吗？",success:function(o){o.confirm&&t.navigateTo({url:"/pages/Main/Mail?type="+i+"&m_id="+n.params.m_id+"&id="+e.aid+"&oid="+e.oid+"&order="+n.type+"&isEdit=true"})}})},orderSend:function(t){this.state=t.status,this.currentId=t.id,this.isShow=!0},orderPickup:function(t){console.log(t),this.state=t.status,this.currentId=t.id,this.isShow=!0},_sellPickup:function(){var e=this;(0,o.sellPickup)({id:this.currentId,number:this.number}).then((function(n){t.showToast({title:"操作成功",mask:!0}),e.isShow=!1,e.number="",e._getSellOrderList()})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_receivePickup:function(){var e=this;(0,o.receivePickup)({id:this.currentId,number:this.number}).then((function(n){t.showToast({title:"操作成功",mask:!0}),e.isShow=!1,e.number="",e._getReceiveOrderList()})).catch((function(e){t.showToast({title:e,icon:"none"})}))},confirm:function(){if(""===this.number)return t.showToast({title:"请输入快递单号",icon:"none"});t.showLoading({title:"保存中...",mask:!0}),1==this.state?1==this.type?this._sellSendout():this._receiveSendout():2==this.state&&(1==this.type?this._sellPickup():this._receivePickup())},_sellSendout:function(){var e=this;(0,o.sellSendout)({id:this.currentId,number:this.number}).then((function(n){t.showToast({title:"确认成功",mask:!0}),e.isShow=!1,e.number="",e._getSellOrderList()})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_receiveSendout:function(){var e=this;(0,o.receiveSendout)({id:this.currentId,number:this.number}).then((function(n){t.showToast({title:"确认成功",mask:!0}),e.isShow=!1,e.number="",e._getReceiveOrderList()})).catch((function(e){t.showToast({title:e,icon:"none"})}))},scanCode:function(){var e=this;wx.scanCode({success:function(n){e.number=n.result,t.showToast({title:"扫描成功",icon:"none"})}})}}};e.default=m}).call(this,n("543d")["default"])},c09f:function(t,e,n){"use strict";(function(t){n("fa97");i(n("66fd"));var e=i(n("dd37"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},dd37:function(t,e,n){"use strict";n.r(e);var i=n("4427"),o=n("ef98");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("4d3b");var s,u=n("f0c5"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=a.exports},ef98:function(t,e,n){"use strict";n.r(e);var i=n("9600"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a}},[["c09f","common/runtime","common/vendor"]]]);