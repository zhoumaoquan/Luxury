(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Profile/Login"],{"0909":function(e,n,t){"use strict";(function(e){t("fa97");a(t("66fd"));var n=a(t("f770"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"3ae0":function(e,n,t){"use strict";t.r(n);var a=t("9a38"),o=t.n(a);for(var u in a)"default"!==u&&function(e){t.d(n,e,(function(){return a[e]}))}(u);n["default"]=o.a},"462e":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return a}));var a={uImage:function(){return t.e("uview-ui/components/u-image/u-image").then(t.bind(null,"3f08"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"5322"))},uToast:function(){return t.e("uview-ui/components/u-toast/u-toast").then(t.bind(null,"01e9"))}},o=function(){var e=this,n=e.$createElement;e._self._c},u=[]},"87fb":function(e,n,t){"use strict";var a=t("b89c"),o=t.n(a);o.a},"9a38":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(t("a34a")),o=t("43dd");function u(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t,a,o,u,r){try{var i=e[u](r),c=i.value}catch(s){return void t(s)}i.done?n(c):Promise.resolve(c).then(a,o)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var u=e.apply(n,t);function i(e){r(u,a,o,i,c,"next",e)}function c(e){r(u,a,o,i,c,"throw",e)}i(void 0)}))}}var c={data:function(){return{}},methods:{userLogin:function(n){var t=this;return i(a.default.mark((function u(){var r,i,c,s,d,l,f;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showLoading({title:"登陆中..."}),a.prev=1,a.next=4,(0,o.downloadFile)(n.detail.userInfo.avatarUrl);case 4:return r=a.sent,i=r.tempFilePath,a.next=8,(0,o.uploadHead)({url:"Personal/upload",imgUrl:i});case 8:c=a.sent,s=c.data,a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](1),e.hideLoading(),e.showToast({title:"头像上传失败，请稍后再试",icon:"none"});case 16:return d={nickname:n.detail.userInfo.nickName,avatar:s.list[0].id,sex:n.detail.userInfo.gender,openid:""},a.prev=17,a.next=20,(0,o.openLogin)({url:"Login/get_openids"});case 20:return l=a.sent,d.openid=l.data.openid,a.next=24,(0,o.addMembers)(d);case 24:f=a.sent,e.setStorageSync("m_id",f),e.setStorageSync("session_key",l.data.session_key),console.log(e.getStorageSync("m_id"),"m_id缓存"),e.hideLoading(),t.$refs.uToast.show({title:"登录成功",back:!0}),a.next=36;break;case 32:a.prev=32,a.t1=a["catch"](17),e.hideLoading(),e.showToast({title:a.t1,icon:"none"});case 36:case"end":return a.stop()}}),u,null,[[1,12],[17,32]])})))()}}};n.default=c}).call(this,t("543d")["default"])},b89c:function(e,n,t){},f770:function(e,n,t){"use strict";t.r(n);var a=t("462e"),o=t("3ae0");for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);t("87fb");var r,i=t("f0c5"),c=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);n["default"]=c.exports}},[["0909","common/runtime","common/vendor"]]]);