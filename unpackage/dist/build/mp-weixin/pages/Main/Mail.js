(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Main/Mail"],{2908:function(t,e,i){"use strict";(function(t){i("fa97");n(i("66fd"));var e=n(i("3403"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"2de4":function(t,e,i){},3403:function(t,e,i){"use strict";i.r(e);var n=i("f653"),s=i("fc95");for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("e2dc");var d,a=i("f0c5"),c=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],d);e["default"]=c.exports},e2dc:function(t,e,i){"use strict";var n=i("2de4"),s=i.n(n);s.a},f653:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uTabsSwiper:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(i.bind(null,"5400"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"5322"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"6b2a"))}},s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isTimer=!0})},o=[]},fc95:function(t,e,i){"use strict";i.r(e);var n=i("fd1a"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},fd1a:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("effd"),s=i("af94"),o={data:function(){return{tabsList:[{name:"自行邮寄"},{name:"预约顺丰"}],current:0,barstyle:{backgroundColor:"#DAB866"},navTab:{"font-size":"33rpx",transition:"all .3s"},appointment:"",isTimer:!1,m_id:"",selfInfo:[],mailInfo:[],serviceTime:[],time:[],activeTime:0,itemTime:0,addressId:"",sid:"",mid:"",selfActive:"",isEdit:!1,orderID:"",orderType:0}},onLoad:function(t){this.current=t.type,this.m_id=t.m_id,0==t.type?this.sid=t.id:this.mid=t.id,"true"===t.isEdit?this.isEdit=!0:this.isEdit=!1,this.orderID=t.oid,this.orderType=t.order},onShow:function(){this.init()},methods:{init:function(){this._getSelfInfo(),this._getMailInfo(),this._getServiceTime()},tabsChange:function(t){this.current=t},_getSelfInfo:function(){var e=this;(0,n.addressInfo)({type:1,m_id:this.m_id,id:this.sid}).then((function(t){e.selfInfo=t,e.selfActive=t[0].id})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_getMailInfo:function(){var e=this;(0,n.addressInfo)({type:2,m_id:this.m_id,id:this.mid}).then((function(t){e.mailInfo=t,""!==e.mid&&(e.addressId=e.mid)})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_getServiceTime:function(){var t=this;(0,n.serviceTime)().then((function(e){t.serviceTime=e,t.time=e[0].time}))},jumpAdd:function(){t.navigateTo({url:"/pages/Profile/userdata/addAddress?type=1&m_id="+this.m_id})},timeChange:function(t){this.activeTime=t,this.time=this.serviceTime[t].time},itemChange:function(t){this.itemTime=t},saveTime:function(){var t=this.serviceTime[this.activeTime].day,e=this.time[this.itemTime];this.appointment="".concat(t," ").concat(e),this.isTimer=!1},selfChange:function(t){this.selfActive=t},addressChange:function(t){this.addressId=t.detail.value},_setSaveAddress:function(){(0,n.saveAddress)({id:this.addressId,type:2,m_id:this.m_id,time:this.appointment}).then((function(e){t.showToast({title:"选择成功",mask:!0,success:function(){setTimeout((function(){var i=getCurrentPages(),n=i[i.length-2];n.$vm.addressType=1,n.$vm.addressInfos=e,t.navigateBack({delta:1})}),1e3)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},saveAddress:function(){return""===this.addressId?t.showToast({title:"请选择收货地址",icon:"none"}):""===this.appointment?t.showToast({title:"请选择预约时间",icon:"none"}):(t.showLoading({title:"请求中...",mask:!0}),void(this.isEdit?1==this.orderType?this._editAddress():this._editReceive():this._setSaveAddress()))},_editAddress:function(){(0,s.editSell)({order_id:this.orderID,address_id:this.addressId,address_type:2,m_id:this.m_id,time_string:this.appointment}).then((function(e){t.showToast({title:"修改邮寄成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_editReceive:function(){(0,s.editReceive)({order_id:this.orderID,address_id:this.addressId,address_type:2,m_id:this.m_id,time_string:this.appointment}).then((function(e){t.showToast({title:"修改邮寄成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_setSaveSelf:function(){(0,n.saveAddress)({id:this.selfActive,type:1,m_id:this.m_id}).then((function(e){t.showToast({title:"选择成功",mask:!0,success:function(){setTimeout((function(){var i=getCurrentPages(),n=i[i.length-2];n.$vm.addressType=0,n.$vm.addressInfos=e,t.navigateBack({delta:1})}),1e3)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},saveSelf:function(){t.showLoading({title:"请求中...",mask:!0}),this.isEdit?1==this.orderType?this._editSelf():this._editSelfs():this._setSaveSelf()},_editSelf:function(){(0,s.editSell)({order_id:this.orderID,address_id:this.selfActive,address_type:1,m_id:this.m_id}).then((function(e){t.showToast({title:"修改邮寄成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},_editSelfs:function(){(0,s.editReceive)({order_id:this.orderID,address_id:this.addressId,address_type:1,m_id:this.m_id}).then((function(e){t.showToast({title:"修改邮寄成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(e){t.showToast({title:e,icon:"none"})}))}}};e.default=o}).call(this,i("543d")["default"])}},[["2908","common/runtime","common/vendor"]]]);